{% macro escapeText(text, dangerouslyDisableAutoEscaping=false) %}
    {% if dangerouslyDisableAutoEscaping -%}
        {{ text | safe }}
    {%- else -%}
        {{ text }}
    {%- endif %}
{% endmacro %}
{% macro escapeTitle(title, url, dangerouslyDisableAutoEscaping=false, showTitleAsUrl=false) %}
    {% if dangerouslyDisableAutoEscaping %}
        {% if showTitleAsUrl %}
            <a href="{{ url }}"
               style="text-decoration:none;
                      color:#ffffff"
               target="_blank">{{ title | safe }}</a>
        {% else %}
            {{ title | safe }}
        {% endif %}
    {% else %}
        {% if showTitleAsUrl %}
            <a href="{{ url }}"
               style="text-decoration:none;
                      color:#ffffff"
               target="_blank">{{ title }}</a>
        {% else %}
            {{ title }}
        {% endif %}
    {% endif %}
{% endmacro %}
{% if loaded %}
    <ul class="cap-list">
        {% for item in items %}
            <li>
                {% if (item.config.showSourceTitle and item.sourceTitle) or item.config.showPublishDate %}
                <span class="cap-source light small dimmed">
                    {% if item.sourceTitle and item.config.showSourceTitle %}
                        {{ item.sourceTitle }}{% if item.config.showPublishDate %}, {% else %}:{% endif %}
                    {% endif %}
                    {% if item.config.showPublishDate %}{{ item.publishDate }}:{% endif %}
                </span>
                {% endif %}
                <span class="cap-severity-{{ item.severity }} cap-title bright medium light{{ ' no-wrap' if not item.config.wrapTitle }}">
                        {% if item.config.showIcon %}
                        <span class="wi weathericon wi-{{ item.iconClass }} cap-severity-{{ item.severity }}"></span>
                        {% endif %}
                        {% if item.config.showAlertTitle %}
                        {{ escapeTitle(item.title, item.url, item.config.dangerouslyDisableAutoEscaping, item.config.showTitleAsUrl) }}
                        {% endif %}
                </span>
                {% if item.config.showOnset %}<span class="cap-onset">{{ item.onset }}</span>{% endif %}
                {% if item.config.showAreaDescription %}<span class="cap-areas light"> {{item.areas}}</span>{% endif %}
            </li>
        {% endfor %}
    </ul>
{% else %}
    <div class="small dimmed">{{ "LOADING" | translate | safe }}</div>
{% endif %}
